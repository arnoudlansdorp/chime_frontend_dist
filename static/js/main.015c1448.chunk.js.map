{"version":3,"sources":["config.js","components/chime/ChimeSdkWrapper.js","components/chimeWeb/Error.jsx","components/chimeWeb/Welcome.jsx","components/chimeWeb/Join.jsx","assets/RaiseBtn/Raise-Hand.svg","components/chat/Chat.jsx","assets/MuteBtn/Mute-Mic-on.svg","assets/CameraBtn/CameraBtn-on.svg","assets/ShareBtn/Share-icon-on.svg","assets/RaiseBtn/Raise-Hand-on.svg","components/chimeWeb/Controls.jsx","assets/MuteBtn/Mute-Mic-off.png","assets/CameraBtn/CameraBtn-off.png","assets/RaiseBtn/Raise-Hand-off.png","components/chimeWeb/Settings.jsx","components/chimeWeb/LocalVideo.jsx","components/chimeWeb/RemoteVideo.jsx","components/chimeWeb/RemoteVideoGroup.jsx","assets/Logo.svg","components/chimeWeb/Meeting.jsx","assets/UoL.png","components/chimeWeb/End.jsx","components/App.js","serviceWorker.js","index.js"],"names":["DEBUG","CHIME_ROOM_API","CHAT_WEBSOCKET","ChimeSdkWrapper","this","initializeSdkWrapper","meetingSession","audioVideo","title","name","region","currentAudioInputDevice","currentAudioOutputDevice","currentVideoInputDevice","audioInputDevices","audioOutputDevices","videoInputDevices","devicesUpdatedCallbacks","roster","rosterUpdateCallbacks","configuration","messagingSocket","messageUpdateCallbacks","error","console","role","playbackURL","a","payload","fetch","config","method","body","JSON","stringify","response","json","Error","JoinInfo","MeetingSessionConfiguration","Meeting","Attendee","initializeMeetingSession","Title","logger","ConsoleLogger","LogLevel","ERROR","deviceController","DefaultDeviceController","DefaultMeetingSession","listAudioInputDevices","forEach","mediaDeviceInfo","push","label","value","deviceId","listAudioOutputDevices","listVideoInputDevices","publishDevicesUpdated","addDeviceChangeObserver","realtimeSubscribeToAttendeeIdPresence","presentAttendeeId","present","publishRosterUpdate","realtimeSubscribeToVolumeIndicator","attendeeId","volume","muted","signalStrength","DefaultModality","base","Math","round","encodeURIComponent","AttendeeInfo","Name","element","logError","window","addEventListener","event","reason","audioInputs","length","chooseAudioInputDevice","audioOutputs","chooseAudioOutputDevice","videoInputs","chooseVideoInputDevice","bindAudioElement","start","messagingUrl","meetingId","credentials","joinToken","ReconnectingPromisedWebSocket","DefaultPromisedWebSocketFactory","DefaultDOMWebSocketFactory","FullJitterBackoff","open","WEB_SOCKET_TIMEOUT_MS","data","parse","publishMessageUpdate","type","timestampMs","Date","now","message","send","end","stop","device","freshAudioInputDeviceList","hasCurrentDevice","freshAudioOutputDeviceList","freshVideoInputDeviceList","callback","index","indexOf","splice","throttle","i","ROSTER_THROTTLE_MS","handleKeyDown","e","keyCode","props","closeError","handleClick","node","target","isModal","classList","contains","parentNode","handleGoCreateRoom","location","replace","document","removeEventListener","className","onClick","viewBox","xmlns","d","errorMsg","Component","Welcome","state","username","showError","handleNameChange","setState","handleRoomChange","handlePlaybackURLChange","handleCreateRoom","preventDefault","stopPropagation","createRoom","setErrorMsg","baseHref","inputRef","React","createRef","qs","URLSearchParams","search","get","history","current","focus","sessionStorage","setItem","createRoomDisabled","Fragment","action","placeholder","ref","onChange","disabled","withRouter","Join","joinRoom","handleJoinRoom","room","joinRoomDisabled","Chat","scrollToBottom","handleChange","connection","handleRoomClick","link","origin","pathname","copyTextToClipboard","encodeURI","setShowPopup","showPopup","setTimeout","text","navigator","clipboard","writeText","then","err","parseUrls","userInput","match","formattedMatch","startsWith","renderMessages","messages","map","formattedMessage","dangerouslySetInnerHTML","__html","timestamp","handleTabChange","tabIndex","renderParticipants","participants","participant","src","RaiseHandIcon","alt","rase","mute","host","chatRef","messagesEndRef","initChatConnection","joinInfo","MeetingId","AttendeeId","JoinToken","split","slice","join","onSelect","maxLength","rows","onKeyDown","Controls","videoStatus","handRaiseStatus","localMuted","muteButtonOnClick","chime","realtimeUnmuteLocalAudio","realtimeMuteLocalAudio","Promise","resolve","raiseButtonOnClick","videoButtonOnClick","startLocalVideoTile","stopLocalVideoTile","endButtonOnClick","leaveRoom","removeItem","ssName","whereTo","realtimeSubscribeToMuteAndUnmuteLocalAudio","realtimeUnsubscribeToMuteAndUnmuteLocalAudio","mic_controls","cam_controls","hand_controls","muteonBtnImg","cameraonBtnImg","openSettings","shareonBtnImg","raiseonBtnImg","Settings","microphone","speaker","camera","devicesUpdatedCallback","fullDeviceInfo","closeSettings","handleMicrophoneChange","selectedDevice","o","handleSpeakerChange","handleCameraChange","handleSave","saveSettings","renderDevices","devices","defaultValue","subscribeToDevicesUpdated","unsubscribeFromDevicesUpdated","currentMic","currentSpeaker","currentCam","availableMics","availableSpeakers","availableCams","id","readOnly","PlaybackURL","LocalVideo","enabled","showMeta","rosterCallback","newRoster","videoElement","addObserver","videoTileDidUpdate","tileState","boundAttendeeId","localTile","tileId","bindVideoElement","active","subscribeToRosterUpdate","unsubscribeFromRosterUpdate","micMuteCls","metaCls","onMouseEnter","handleMouseEnter","bind","onMouseLeave","handleMouseLeave","data-id","width","height","fill","RemoteVideo","videoEnabled","camClass","videoId","RemoteVideoGroup","rosterChanged","findRosterSlot","Object","keys","previousRoster","differ","filter","k","assign","attendee","videoTileDidUpdateCallback","isContent","getElementById","videoTileWasRemovedCallback","find","Array","from","key","videoTileWasRemoved","meetingStatus","showSettings","showPopupMessage","showModal","log","hideModal","setMetadataId","metadataId","layout","logo","myVideoElement","audioElementRef","getItem","ssData","reInitializeMeetingSession","audioVideoDidStop","sessionStatus","statusCode","MeetingSessionStatusCode","AudioCallEnded","style","display","End","href","App","path","Boolean","hostname","ReactDOM","render","StrictMode","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.015c1448.chunk.js","sourcesContent":["export const BASE_HREF = \"\";\r\n\r\n// API endpoint for retrieving the attendees list, joining the room, and ending the room\r\n//export const CHIME_ROOM_API = \"\";\r\n\r\n// Chime-SDK allows up to 16 attendee videos\r\nexport const CHIME_ROOM_MAX_ATTENDEE = 16;\r\n\r\n// Default video stream to play inside the video player\r\nexport const DEFAULT_VIDEO_STREAM = \"https://fcc3ddae59ed.us-west-2.playback.live-video.net/api/video/v1/us-west-2.893648527354.channel.DmumNckWFTqz.m3u8\";\r\n\r\n// Default Chat websocket link\r\n//export const CHAT_WEBSOCKET = \"\";\r\n\r\n// Chime-SDK logging level: INFO, WARN, ERROR, DEBUG\r\nexport const CHIME_LOG_LEVEL = 'WARN';\r\n\r\n// Chime-Web UI debugging logging: true / false\r\nexport const DEBUG = false;\r\n\r\nexport const CHIME_ROOM_API = \"https://m7qxs56fx5.execute-api.us-east-1.amazonaws.com/Prod/\";\r\nexport const CHAT_WEBSOCKET = \"wss://5sg50im573.execute-api.us-east-1.amazonaws.com/Prod\";\r\n","import {\r\n  ConsoleLogger,\r\n  DefaultDeviceController,\r\n  DefaultDOMWebSocketFactory,\r\n  DefaultMeetingSession,\r\n  DefaultModality,\r\n  DefaultPromisedWebSocketFactory,\r\n  FullJitterBackoff,\r\n  LogLevel,\r\n  MeetingSessionConfiguration,\r\n  ReconnectingPromisedWebSocket\r\n} from 'amazon-chime-sdk-js';\r\n\r\nimport throttle from 'lodash/throttle';\r\nimport * as config from '../../config';\r\n\r\n\r\nexport default class ChimeSdkWrapper {\r\n\r\n  static WEB_SOCKET_TIMEOUT_MS = 10000;\r\n  static ROSTER_THROTTLE_MS = 400;\r\n\r\n  constructor() {\r\n    this.initializeSdkWrapper();\r\n  }\r\n\r\n  initializeSdkWrapper() {\r\n    this.meetingSession = null;\r\n    this.audioVideo = null;\r\n    this.title = null;\r\n    this.name = null;\r\n    this.region = null;\r\n    this.currentAudioInputDevice = null;\r\n    this.currentAudioOutputDevice = null;\r\n    this.currentVideoInputDevice = null;\r\n    this.audioInputDevices = [];\r\n    this.audioOutputDevices = [];\r\n    this.videoInputDevices = [];\r\n    this.devicesUpdatedCallbacks = [];\r\n    this.roster = {};\r\n    this.rosterUpdateCallbacks = [];\r\n    this.configuration = null;\r\n    this.messagingSocket = null;\r\n    this.messageUpdateCallbacks = [];\r\n  }\r\n\r\n  logError(error) {\r\n    console.error(error);\r\n  }\r\n\r\n  async createRoom(role, name, title, playbackURL, region) {\r\n    if (!name || !title || !role) {\r\n      console.error(\r\n           `role=${role} name=${name} title=${title} must exist`\r\n      );\r\n      return;\r\n    }\r\n\r\n    const payload = {\r\n      name,\r\n      title,\r\n      playbackURL,\r\n      role\r\n    };\r\n\r\n    const response = await fetch(\r\n      `${config.CHIME_ROOM_API}/join`,\r\n      {\r\n        method: 'POST',\r\n        body: JSON.stringify(payload)\r\n      }\r\n    );\r\n    const json = await response.json();\r\n    if (json.error) {\r\n      throw new Error(\r\n        json.error\r\n      );\r\n    }\r\n\r\n    const { JoinInfo } = json;\r\n    if (!JoinInfo) {\r\n      throw new Error(\r\n        'CreateOrJoin.classRoomDoesNotExist'\r\n      );\r\n    }\r\n    this.configuration = new MeetingSessionConfiguration(\r\n      JoinInfo.Meeting,\r\n      JoinInfo.Attendee\r\n    );\r\n    await this.initializeMeetingSession(this.configuration);\r\n\r\n    this.title = title;\r\n    this.name = name;\r\n    this.region = region;\r\n\r\n    return JoinInfo;\r\n  }\r\n\r\n  async reInitializeMeetingSession(JoinInfo, name) {\r\n    this.configuration = new MeetingSessionConfiguration(\r\n      JoinInfo.Meeting,\r\n      JoinInfo.Attendee\r\n    );\r\n    await this.initializeMeetingSession(this.configuration);\r\n\r\n    this.title = JoinInfo.Title;\r\n    this.name = name;\r\n    // this.region = region;\r\n  }\r\n\r\n  async initializeMeetingSession(configuration) {\r\n    const logger = new ConsoleLogger('SDK', LogLevel.ERROR);\r\n    const deviceController = new DefaultDeviceController(logger);\r\n    this.meetingSession = new DefaultMeetingSession(\r\n      configuration,\r\n      logger,\r\n      deviceController\r\n    );\r\n    this.audioVideo = this.meetingSession.audioVideo;\r\n\r\n    this.audioInputDevices = [];\r\n    (await this.audioVideo.listAudioInputDevices()).forEach(\r\n      (mediaDeviceInfo) => {\r\n        this.audioInputDevices.push({\r\n          label: mediaDeviceInfo.label,\r\n          value: mediaDeviceInfo.deviceId\r\n        });\r\n      }\r\n    );\r\n    this.audioOutputDevices = [];\r\n    (await this.audioVideo.listAudioOutputDevices()).forEach(\r\n      (mediaDeviceInfo) => {\r\n        this.audioOutputDevices.push({\r\n          label: mediaDeviceInfo.label,\r\n          value: mediaDeviceInfo.deviceId\r\n        });\r\n      }\r\n    );\r\n    this.videoInputDevices = [];\r\n    (await this.audioVideo.listVideoInputDevices()).forEach(\r\n      (mediaDeviceInfo) => {\r\n        this.videoInputDevices.push({\r\n          label: mediaDeviceInfo.label,\r\n          value: mediaDeviceInfo.deviceId\r\n        });\r\n      }\r\n    );\r\n    this.publishDevicesUpdated();\r\n    this.audioVideo.addDeviceChangeObserver(this);\r\n\r\n    this.audioVideo.realtimeSubscribeToAttendeeIdPresence(\r\n      (presentAttendeeId, present) => {\r\n        if (!present) {\r\n          delete this.roster[presentAttendeeId];\r\n          //this.publishRosterUpdate.cancel();\r\n          this.publishRosterUpdate()();\r\n          return;\r\n        }\r\n\r\n        this.audioVideo.realtimeSubscribeToVolumeIndicator(\r\n          presentAttendeeId,\r\n          async (\r\n            attendeeId,\r\n            volume,\r\n            muted,\r\n            signalStrength\r\n          ) => {\r\n            const baseAttendeeId = new DefaultModality(attendeeId).base();\r\n            if (baseAttendeeId !== attendeeId) {\r\n              // Don't include the content attendee in the roster.\r\n              //\r\n              // When you or other attendees share content (a screen capture, a video file,\r\n              // or any other MediaStream object), the content attendee (attendee-id#content) joins the session and\r\n              // shares content as if a regular attendee shares a video.\r\n              //\r\n              // For example, your attendee ID is \"my-id\". When you call meetingSession.audioVideo.startContentShare,\r\n              // the content attendee \"my-id#content\" will join the session and share your content.\r\n              return;\r\n            }\r\n\r\n            let shouldPublishImmediately = false;\r\n\r\n            if (!this.roster[attendeeId]) {\r\n              this.roster[attendeeId] = { name: '' };\r\n            }\r\n            if (volume !== null) {\r\n              this.roster[attendeeId].volume = Math.round(volume * 100);\r\n            }\r\n            if (muted !== null) {\r\n              this.roster[attendeeId].muted = muted;\r\n            }\r\n            if (signalStrength !== null) {\r\n              this.roster[attendeeId].signalStrength = Math.round(\r\n                signalStrength * 100\r\n              );\r\n            }\r\n            if (this.title && attendeeId && !this.roster[attendeeId].name) {\r\n              const response = await fetch(\r\n                `${config.CHIME_ROOM_API}/attendee?title=${encodeURIComponent(\r\n                  this.title\r\n                )}&attendeeId=${encodeURIComponent(attendeeId)}`\r\n              );\r\n              const json = await response.json();\r\n              if (json.AttendeeInfo && this.roster[attendeeId]) {\r\n                this.roster[attendeeId].name = json.AttendeeInfo.Name || '';\r\n                shouldPublishImmediately = true;\r\n              }\r\n            }\r\n\r\n            if (shouldPublishImmediately) {\r\n              //this.publishRosterUpdate.cancel();\r\n            }\r\n            this.publishRosterUpdate()();\r\n          }\r\n        );\r\n      }\r\n    );\r\n  }\r\n\r\n  async joinRoom(element) {\r\n    if (!element) {\r\n      this.logError(new Error(`element does not exist`));\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\r\n      'unhandledrejection',\r\n      (event) => {\r\n        this.logError(event.reason);\r\n      }\r\n    );\r\n\r\n    const audioInputs = await this.audioVideo.listAudioInputDevices();\r\n    if (audioInputs && audioInputs.length > 0 && audioInputs[0].deviceId) {\r\n      this.currentAudioInputDevice = {\r\n        label: audioInputs[0].label,\r\n        value: audioInputs[0].deviceId\r\n      };\r\n      await this.audioVideo.chooseAudioInputDevice(audioInputs[0].deviceId);\r\n    }\r\n\r\n    const audioOutputs = await this.audioVideo.listAudioOutputDevices();\r\n    if (audioOutputs && audioOutputs.length > 0 && audioOutputs[0].deviceId) {\r\n      this.currentAudioOutputDevice = {\r\n        label: audioOutputs[0].label,\r\n        value: audioOutputs[0].deviceId\r\n      };\r\n      await this.audioVideo.chooseAudioOutputDevice(audioOutputs[0].deviceId);\r\n    }\r\n\r\n    const videoInputs = await this.audioVideo.listVideoInputDevices();\r\n    if (videoInputs && videoInputs.length > 0 && videoInputs[0].deviceId) {\r\n      this.currentVideoInputDevice = {\r\n        label: videoInputs[0].label,\r\n        value: videoInputs[0].deviceId\r\n      };\r\n      await this.audioVideo.chooseVideoInputDevice(null);\r\n    }\r\n\r\n    this.publishDevicesUpdated();\r\n\r\n    this.audioVideo.bindAudioElement(element);\r\n    this.audioVideo.start();\r\n  }\r\n\r\n  async joinRoomMessaging() {\r\n    if (!this.configuration) {\r\n      this.logError(new Error('configuration does not exist'));\r\n      return;\r\n    }\r\n\r\n    const messagingUrl = `${config.CHAT_WEBSOCKET}?MeetingId=${this.configuration.meetingId}&AttendeeId=${this.configuration.credentials.attendeeId}&JoinToken=${this.configuration.credentials.joinToken}`;\r\n    this.messagingSocket = new ReconnectingPromisedWebSocket(\r\n      messagingUrl,\r\n      [],\r\n      'arraybuffer',\r\n      new DefaultPromisedWebSocketFactory(new DefaultDOMWebSocketFactory()),\r\n      new FullJitterBackoff(1000, 0, 10000)\r\n    );\r\n\r\n    await this.messagingSocket.open(this.WEB_SOCKET_TIMEOUT_MS);\r\n\r\n    this.messagingSocket.addEventListener('message', (event) => {\r\n      try {\r\n        const data = JSON.parse(event.data);\r\n        const { attendeeId } = data.payload;\r\n\r\n        let name;\r\n        if (this.roster[attendeeId]) {\r\n          name = this.roster[attendeeId].name;\r\n        }\r\n\r\n        this.publishMessageUpdate({\r\n          type: data.type,\r\n          payload: data.payload,\r\n          timestampMs: Date.now(),\r\n          name\r\n        });\r\n      } catch (error) {\r\n        this.logError(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  sendMessage(type, payload) {\r\n    if (!this.messagingSocket) {\r\n      return;\r\n    }\r\n    const message = {\r\n      message: 'sendmessage',\r\n      data: JSON.stringify({ type, payload })\r\n    };\r\n    try {\r\n      this.messagingSocket.send(JSON.stringify(message));\r\n    } catch (error) {\r\n      this.logError(error);\r\n    }\r\n  }\r\n\r\n  async leaveRoom(end) {\r\n    try {\r\n      this.audioVideo.stop();\r\n    } catch (error) {\r\n      this.logError(error);\r\n    }\r\n\r\n    // try {\r\n    //   await this.messagingSocket.close(this.WEB_SOCKET_TIMEOUT_MS);\r\n    // } catch (error) {\r\n    //   this.logError(error);\r\n    // }\r\n\r\n    try {\r\n      if (end && this.title) {\r\n        await fetch(\r\n          `${config.CHIME_ROOM_API}/end?title=${encodeURIComponent(this.title)}`,\r\n          {\r\n            method: 'POST'\r\n          }\r\n        );\r\n      }\r\n    } catch (error) {\r\n      this.logError(error);\r\n    }\r\n\r\n    this.initializeSdkWrapper();\r\n  }\r\n\r\n  // Device\r\n\r\n  async chooseAudioInputDevice(device) {\r\n    try {\r\n      await this.audioVideo.chooseAudioInputDevice(device.value);\r\n      this.currentAudioInputDevice = device;\r\n    } catch (error) {\r\n      this.logError(error);\r\n    }\r\n  }\r\n\r\n  async chooseAudioOutputDevice(device) {\r\n    try {\r\n      await this.audioVideo.chooseAudioOutputDevice(device.value);\r\n      this.currentAudioOutputDevice = device;\r\n    } catch (error) {\r\n      this.logError(error);\r\n    }\r\n  }\r\n\r\n  async chooseVideoInputDevice(device) {\r\n    try {\r\n      await this.audioVideo.chooseVideoInputDevice(device.value);\r\n      this.currentVideoInputDevice = device;\r\n    } catch (error) {\r\n      this.logError(error);\r\n    }\r\n  }\r\n\r\n  // Observer methods\r\n\r\n  audioInputsChanged(freshAudioInputDeviceList) {\r\n    let hasCurrentDevice = false;\r\n    this.audioInputDevices = [];\r\n    freshAudioInputDeviceList.forEach((mediaDeviceInfo) => {\r\n      if (\r\n        this.currentAudioInputDevice &&\r\n        mediaDeviceInfo.deviceId === this.currentAudioInputDevice.value\r\n      ) {\r\n        hasCurrentDevice = true;\r\n      }\r\n      this.audioInputDevices.push({\r\n        label: mediaDeviceInfo.label,\r\n        value: mediaDeviceInfo.deviceId\r\n      });\r\n    });\r\n    if (!hasCurrentDevice) {\r\n      this.currentAudioInputDevice =\r\n        this.audioInputDevices.length > 0 ? this.audioInputDevices[0] : null;\r\n    }\r\n    this.publishDevicesUpdated();\r\n  }\r\n\r\n  audioOutputsChanged(freshAudioOutputDeviceList) {\r\n    let hasCurrentDevice = false;\r\n    this.audioOutputDevices = [];\r\n    freshAudioOutputDeviceList.forEach((mediaDeviceInfo) => {\r\n      if (\r\n        this.currentAudioOutputDevice &&\r\n        mediaDeviceInfo.deviceId === this.currentAudioOutputDevice.value\r\n      ) {\r\n        hasCurrentDevice = true;\r\n      }\r\n      this.audioOutputDevices.push({\r\n        label: mediaDeviceInfo.label,\r\n        value: mediaDeviceInfo.deviceId\r\n      });\r\n    });\r\n    if (!hasCurrentDevice) {\r\n      this.currentAudioOutputDevice =\r\n        this.audioOutputDevices.length > 0 ? this.audioOutputDevices[0] : null;\r\n    }\r\n    this.publishDevicesUpdated();\r\n  }\r\n\r\n  videoInputsChanged(freshVideoInputDeviceList) {\r\n    let hasCurrentDevice = false;\r\n    this.videoInputDevices = [];\r\n    freshVideoInputDeviceList.forEach((mediaDeviceInfo) => {\r\n      if (\r\n        this.currentVideoInputDevice &&\r\n        mediaDeviceInfo.deviceId === this.currentVideoInputDevice.value\r\n      ) {\r\n        hasCurrentDevice = true;\r\n      }\r\n      this.videoInputDevices.push({\r\n        label: mediaDeviceInfo.label,\r\n        value: mediaDeviceInfo.deviceId\r\n      });\r\n    });\r\n    if (!hasCurrentDevice) {\r\n      this.currentVideoInputDevice =\r\n        this.videoInputDevices.length > 0 ? this.videoInputDevices[0] : null;\r\n    }\r\n    this.publishDevicesUpdated();\r\n  }\r\n\r\n  // Subscribe and unsubscribe\r\n\r\n  subscribeToDevicesUpdated(callback) {\r\n    this.devicesUpdatedCallbacks.push(callback);\r\n  }\r\n\r\n  unsubscribeFromDevicesUpdated(callback) {\r\n    const index = this.devicesUpdatedCallbacks.indexOf(callback);\r\n    if (index !== -1) {\r\n      this.devicesUpdatedCallbacks.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  publishDevicesUpdated() {\r\n    this.devicesUpdatedCallbacks.forEach(\r\n      (callback) => {\r\n        callback({\r\n          currentAudioInputDevice: this.currentAudioInputDevice,\r\n          currentAudioOutputDevice: this.currentAudioOutputDevice,\r\n          currentVideoInputDevice: this.currentVideoInputDevice,\r\n          audioInputDevices: this.audioInputDevices,\r\n          audioOutputDevices: this.audioOutputDevices,\r\n          videoInputDevices: this.videoInputDevices\r\n        });\r\n      }\r\n    );\r\n  }\r\n\r\n  subscribeToRosterUpdate(callback) {\r\n    this.rosterUpdateCallbacks.push(callback);\r\n  }\r\n\r\n  unsubscribeFromRosterUpdate(callback) {\r\n    const index = this.rosterUpdateCallbacks.indexOf(callback);\r\n    if (index !== -1) {\r\n      this.rosterUpdateCallbacks.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  publishRosterUpdate() {\r\n    return throttle(() => {\r\n      for (let i = 0; i < this.rosterUpdateCallbacks.length; i += 1) {\r\n        const callback = this.rosterUpdateCallbacks[i];\r\n        callback(this.roster);\r\n      }\r\n    }, this.ROSTER_THROTTLE_MS);\r\n  }\r\n\r\n  subscribeToMessageUpdate(callback) {\r\n    this.messageUpdateCallbacks.push(callback);\r\n  }\r\n\r\n  unsubscribeFromMessageUpdate(callback) {\r\n    const index = this.messageUpdateCallbacks.indexOf(callback);\r\n    if (index !== -1) {\r\n      this.messageUpdateCallbacks.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  publishMessageUpdate(message) {\r\n    for (let i = 0; i < this.messageUpdateCallbacks.length; i += 1) {\r\n      const callback = this.messageUpdateCallbacks[i];\r\n      callback(message);\r\n    }\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Styles\r\nimport './Error.css';\r\n\r\n// Assets\r\n\r\nclass Error extends Component {\r\n\r\n  componentDidMount() {\r\n    document.addEventListener(\"keydown\", this.handleKeyDown);\r\n\r\n    // setTimeout(() => {\r\n    //   this.props.closeError();\r\n    // }, 10000);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = (e) => {\r\n    if (e.keyCode === 27) { // keyCode 27 is Escape key\r\n      this.props.closeError();\r\n    }\r\n  }\r\n\r\n  handleClick = (e) => {\r\n    let node = e.target;\r\n    let isModal = false;\r\n    while (node) {\r\n      if (node && node.classList && node.classList.contains('notice--error')) {\r\n        isModal = true;\r\n        break;\r\n      }\r\n      node = node.parentNode;\r\n    }\r\n    if (!isModal) {\r\n      this.props.closeError();\r\n    }\r\n  }\r\n\r\n  handleGoCreateRoom = () => {\r\n    window.location.replace(\"/index.html\");\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"notice notice--error\" onClick={this.handleClick}>\r\n        <div className=\"notice__content\">\r\n          <div className=\"icon icon--24 notice__icon\"><svg viewBox=\"0 0 1000 1000\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M 500 0C 224 0 0 224 0 500C 0 776 224 1000 500 1000C 776 1000 1000 776 1000 500C 1000 224 776 0 500 0C 500 0 500 0 500 0M 526 150C 576 150 602 175 601 224C 600 300 600 350 575 525C 570 560 560 575 525 575C 525 575 475 575 475 575C 440 575 430 560 425 525C 400 355 400 300 400 226C 400 175 425 150 475 150M 500 650C 527 650 552 661 571 679C 589 698 600 723 600 750C 600 805 555 850 500 850C 445 850 400 805 400 750C 400 723 411 698 429 679C 448 661 473 650 500 650C 500 650 500 650 500 650\"/></svg></div>\r\n          {this.props.errorMsg}\r\n          <div>To create your own room, click <span className=\"go-create-room\" onClick={this.handleGoCreateRoom}>here</span>.</div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nError.propTypes = {\r\n  errorMsg: PropTypes.string,\r\n  closeError: PropTypes.func\r\n};\r\n\r\nexport default Error;\r\n","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport * as config from '../../config';\r\nimport Error from './Error';\r\n\r\nclass Welcome extends Component {\r\n\r\n  state = {\r\n    role: 'host',\r\n    username: '',\r\n    title: '',\r\n    playbackURL: config.DEFAULT_VIDEO_STREAM,\r\n    errorMsg: '',\r\n    showError: false\r\n  }\r\n\r\n  constructor() {\r\n    super ();\r\n    this.baseHref = config.BASE_HREF;\r\n    this.inputRef = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    const qs = new URLSearchParams(this.props.location.search);\r\n    const action = qs.get('action');\r\n    if (action === 'join') {\r\n      const title = qs.get('room');\r\n      this.props.history.push(`${this.baseHref}/join?room=${title}`);\r\n    }\r\n    this.inputRef.current.focus();\r\n  }\r\n\r\n  handleNameChange = e => {\r\n    this.setState({ username: e.target.value })\r\n  }\r\n\r\n  handleRoomChange = e => {\r\n    this.setState({ title: e.target.value })\r\n  }\r\n\r\n  handlePlaybackURLChange = e => {\r\n    this.setState({ playbackURL: e.target.value })\r\n  }\r\n\r\n  handleCreateRoom = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    this.createRoom();\r\n  }\r\n\r\n  setErrorMsg = errorMsg => {\r\n    this.setState({ errorMsg, showError: true });\r\n  }\r\n\r\n  closeError = () => {\r\n    this.setState({ showError: false });\r\n  }\r\n\r\n  async createRoom() {\r\n    const { title, username, playbackURL } = this.state;\r\n    const data = {\r\n      username,\r\n      title,\r\n      playbackURL,\r\n      role: this.state.role\r\n    }\r\n    sessionStorage.setItem(`chime[${title}]`, JSON.stringify(data));\r\n    this.props.history.push(`${this.baseHref}/meeting?room=${title}&username=${username}`);\r\n  }\r\n\r\n  render() {\r\n    const { username, title, playbackURL } = this.state;\r\n    const createRoomDisabled = !username || !title || !playbackURL;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"welcome form-grid\">\r\n\r\n          <div className=\"welcome__intro\">\r\n            <div className=\"intro__inner formatted-text\">\r\n              <h1>Amazon IVS with ChimeSDK</h1>\r\n              <h3>Create or join rooms, and watch Amazon IVS streams with anyone.</h3>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"welcome__content pd-4\">\r\n            <div className=\"content__inner\">\r\n              <h2 className=\"mg-b-2\">Get started</h2>\r\n              <form action=\"\">\r\n                <fieldset className=\"mg-b-2\">\r\n                  <input className=\"mg-b-2\" type=\"text\" placeholder=\"Your name\" value={username} ref={this.inputRef} onChange={this.handleNameChange} />\r\n                  <input type=\"text\" placeholder=\"Room name\" value={title} onChange={this.handleRoomChange} />\r\n                  <input type=\"hidden\" placeholder=\"Playback URL\" value={playbackURL} onChange={this.handlePlaybackURLChange} />\r\n                  <button className=\"mg-t-2 btn btn--primary\" disabled={createRoomDisabled} onClick={this.handleCreateRoom} >Create room</button>\r\n                </fieldset>\r\n              </form>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n        {this.state.showError && (\r\n          <Error\r\n            closeError={this.closeError}\r\n            errorMsg={this.state.errorMsg}\r\n          />\r\n        )}\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(Welcome);\r\n","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport * as config from '../../config';\r\nimport Error from './Error';\r\n\r\nclass Join extends Component {\r\n\r\n  state = {\r\n    role: 'attendee',\r\n    username: '',\r\n    title: '',\r\n    errorMsg: '',\r\n    showError: false\r\n  }\r\n\r\n  constructor() {\r\n    super ();\r\n    this.inputRef = React.createRef();\r\n    this.baseHref = config.BASE_HREF;\r\n  }\r\n\r\n  componentDidMount() {\r\n    const qs = new URLSearchParams(this.props.location.search);\r\n    const room = qs.get('room');\r\n    this.setState({ title: room });\r\n  }\r\n\r\n  joinRoom = async () => {\r\n    const { username, title } = this.state;\r\n    const data = {\r\n      username,\r\n      title,\r\n      role: this.state.role\r\n    }\r\n    sessionStorage.setItem(`chime[${title}]`, JSON.stringify(data));\r\n    this.props.history.push(`${this.baseHref}/meeting?room=${title}`);\r\n  }\r\n\r\n  handleNameChange = e => {\r\n    this.setState({ username: e.target.value })\r\n  }\r\n\r\n  handleJoinRoom = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    this.joinRoom();\r\n  }\r\n\r\n  handleClick = (e) => {\r\n    let node = e.target;\r\n    let isModal = false;\r\n    while (node) {\r\n      if (node && node.classList && node.classList.contains('notice--error')) {\r\n        isModal = true;\r\n        break;\r\n      }\r\n      node = node.parentNode;\r\n    }\r\n    if (!isModal) {\r\n      this.closeError();\r\n    }\r\n  }\r\n\r\n  setErrorMsg = errorMsg => {\r\n    this.setState({ errorMsg, showError: true });\r\n  }\r\n\r\n  closeError = () => {\r\n    this.setState({ showError: false });\r\n  }\r\n\r\n  render() {\r\n    const { username } = this.state;\r\n    const joinRoomDisabled = !username;\r\n    return (\r\n      <div className=\"welcome form-grid\" onClick={this.handleClick}>\r\n\r\n        <div className=\"welcome__intro\">\r\n          <div className=\"intro__inner formatted-text\">\r\n            <h1>Amazon IVS with ChimeSDK</h1>\r\n            <h3>Create or join rooms, and watch Amazon IVS streams with anyone.</h3>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"welcome__content pd-4\">\r\n          <div className=\"content__inner\">\r\n            <h2 className=\"mg-b-2\">Hey there!</h2>\r\n            <form action=\"\">\r\n              <fieldset className=\"mg-b-2\">\r\n                <input type=\"text\" placeholder=\"Your name\" value={username} ref={this.inputRef} onChange={this.handleNameChange} />\r\n                <button className=\"mg-t-1 btn btn--primary\" disabled={joinRoomDisabled} onClick={this.handleJoinRoom}>Join room</button>\r\n              </fieldset>\r\n            </form>\r\n          </div>\r\n        </div>\r\n\r\n        {this.state.showError && (\r\n          <Error\r\n            closeError={this.closeError}\r\n            errorMsg={this.state.errorMsg}\r\n          />\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(Join);\r\n","export default __webpack_public_path__ + \"static/media/Raise-Hand.fddd95b6.svg\";","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  DefaultPromisedWebSocketFactory,\r\n  DefaultDOMWebSocketFactory,\r\n  FullJitterBackoff,\r\n  ReconnectingPromisedWebSocket\r\n} from 'amazon-chime-sdk-js';\r\nimport * as config from '../../config';\r\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\r\nimport 'react-tabs/style/react-tabs.css';\r\n\r\n// Styles\r\nimport './Chat.css';\r\n\r\nimport RaiseHandIcon from \"./../../assets/RaiseBtn/Raise-Hand.svg\";\r\n// import DeleteIcon from \"./../../assets/Delete Q.svg\";\r\n\r\nclass Chat extends Component {\r\n  constructor() {\r\n    super ();\r\n\r\n    this.WEB_SOCKET_TIMEOUT_MS = 130000;\r\n\r\n    this.state = {\r\n      message: '',\r\n      messages: [],\r\n      connection: null,\r\n      showPopup: false,\r\n      participants: [\r\n        {\r\n          name: 'Zackary May-Mccormi kuma',\r\n          rase: false,\r\n          mute: false,\r\n          host: false,\r\n        },\r\n        {\r\n          name: 'Zackary May-Mccormi kuma',\r\n          rase: false,\r\n          mute: false,\r\n          host: false,\r\n        },\r\n        {\r\n          name: 'Zackary May-Mccormi kuma',\r\n          rase: false,\r\n          mute: false,\r\n          host: false,\r\n        },\r\n        {\r\n          name: 'Zackary May-Mccormi kuma',\r\n          rase: false,\r\n          mute: false,\r\n          host: false,\r\n        }\r\n      ],\r\n      tabIndex: 0,\r\n    }\r\n    this.chatRef = React.createRef();\r\n    this.messagesEndRef = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initChatConnection();\r\n  }\r\n\r\n  async initChatConnection() {\r\n    const { Meeting, Attendee } = this.props.joinInfo;\r\n    const messagingUrl = `${config.CHAT_WEBSOCKET}?MeetingId=${Meeting.MeetingId}&AttendeeId=${Attendee.AttendeeId}&JoinToken=${Attendee.JoinToken}`\r\n    const connection = new ReconnectingPromisedWebSocket(\r\n      messagingUrl,\r\n      [],\r\n      'arraybuffer',\r\n      new DefaultPromisedWebSocketFactory(new DefaultDOMWebSocketFactory()),\r\n      new FullJitterBackoff(1000, 0, 10000)\r\n    );\r\n\r\n    if (config.DEBUG) console.log(connection);\r\n\r\n    await connection.open(this.WEB_SOCKET_TIMEOUT_MS);\r\n\r\n    connection.addEventListener('message', event => {\r\n      const messages = this.state.messages;\r\n      const data = event.data.split('::');\r\n      const username = data[0];\r\n      const message = data.slice(1).join('::'); // in case the message contains the separator '::'\r\n\r\n      messages.push({\r\n        timestamp: Date.now(),\r\n        username,\r\n        message\r\n      });\r\n\r\n      this.setState({ messages });\r\n    });\r\n\r\n    this.setState({ connection });\r\n\r\n    this.chatRef.current.focus();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.scrollToBottom();\r\n  }\r\n\r\n  scrollToBottom = () => {\r\n    // this.messagesEndRef.current.scrollIntoView({ behavior: 'smooth' })\r\n  }\r\n\r\n  handleChange = e => {\r\n    this.setState({ message: e.target.value })\r\n  }\r\n\r\n  handleKeyDown = (e) => {\r\n    if (e.keyCode === 13) { // keyCode 13 is carriage return\r\n      const { message, connection } = this.state;\r\n      const { username } = this.props;\r\n      if (message) {\r\n        const data = `{\r\n          \"message\": \"sendmessage\",\r\n          \"data\": \"${username}::${message.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"')}\"\r\n        }`;\r\n        connection.send(data);\r\n\r\n        this.setState({ message: '' });\r\n      }\r\n    }\r\n  }\r\n\r\n  handleRoomClick = (e) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    const { title } = this.props;\r\n    const link = `${window.location.origin}${window.location.pathname.replace('meeting', 'index.html')}?action=join&room=${title}`;\r\n    if (config.DEBUG) console.log(link);\r\n    this.copyTextToClipboard(encodeURI(link));\r\n  }\r\n\r\n  setShowPopup = () => {\r\n    // show popup message\r\n    this.setState({ showPopup: true });\r\n\r\n    // hide popup message after 2 seconds\r\n    setTimeout(() => {\r\n      this.setState({ showPopup: false })\r\n    }, 2000);\r\n  }\r\n\r\n  copyTextToClipboard = text => {\r\n    if (navigator.clipboard) {\r\n      navigator.clipboard.writeText(text)\r\n      .then(() => {\r\n        this.setShowPopup();\r\n        if (config.DEBUG) console.log('Room link copied to clipboard');\r\n      }, (err) => {\r\n        if (config.DEBUG) console.log('Could not copy text: ', err);\r\n      });\r\n    }\r\n  }\r\n\r\n  parseUrls = (userInput) => {\r\n    var urlRegExp = /(http(s)?:\\/\\/.)?(www\\.)?[-a-zA-Z0-9@:%._~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_.~#?&//=]*)/g;\r\n    let formattedMessage = userInput.replace(urlRegExp, (match) => {\r\n      let formattedMatch = match;\r\n      if (!match.startsWith('http')) {\r\n        formattedMatch = `http://${match}`;\r\n      }\r\n      return `<a href=${formattedMatch} class=\"chat-line__link\" target=\"_blank\" rel=\"noopener noreferrer\">${match}</a>`;\r\n    });\r\n    return formattedMessage;\r\n  }\r\n\r\n  renderMessages = () => {\r\n    const { messages } = this.state;\r\n    return (\r\n      messages.map(message => {\r\n        let formattedMessage = this.parseUrls(message.message);\r\n        return (\r\n          <div className=\"chat-line\" key={message.timestamp}>\r\n            <p><span dangerouslySetInnerHTML={{__html: formattedMessage}} /></p>\r\n            <div className=\"chat-action\">\r\n              {/* <button className=\"vote-button\">↑</button> */}\r\n              <span className=\"qa-tool-btn vote-icon\"></span>\r\n              <span className=\"vote-count\"> 0 </span>\r\n              <span className=\"border-bottom\"> </span>\r\n              <span className=\"qa-tool-btn delete-icon\"></span>\r\n            </div>\r\n          </div>\r\n        )\r\n      })\r\n    )\r\n  }\r\n\r\n  handleTabChange = (index) => {\r\n    this.setState({\r\n      tabIndex: index\r\n    })\r\n  }\r\n\r\n  renderParticipants = () => {\r\n    const { participants } = this.state;\r\n\r\n    return (\r\n      participants.map((participant, index) => {\r\n        return (\r\n          <div className=\"participant-item\" key={index}>\r\n            <img src={RaiseHandIcon} alt=\"\" className=\"raise-hand-icon\"/>\r\n            <span className=\"participant-name\">{participant.name}</span>\r\n\r\n            <div className=\"participant-tool-btns\">\r\n              <span className=\"participant-tool-btn mute-icon\"></span>\r\n              <span className=\"participant-tool-btn host-icon\"></span>\r\n              <span className=\"participant-tool-btn delete-icon\"></span>\r\n            </div>\r\n          </div>\r\n        );\r\n      })\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { message } = this.state;\r\n    // const popup = showPopup ? 'show' : '';\r\n    return (\r\n      <div className=\"chat full-height pos-relative\">\r\n        <div className=\"chat__wrapper full-width pos-relative\">\r\n          <Tabs onSelect={index => {this.handleTabChange(index)}}>\r\n            <TabList>\r\n              <Tab>Q&A</Tab>\r\n              <Tab>PARTICIPANTS</Tab>\r\n            </TabList>\r\n      \r\n            <TabPanel>\r\n              <div className=\"message-container\">\r\n                <div className=\"messages pd-x-1\">\r\n                  {this.renderMessages()}\r\n                  <div ref={this.messagesEndRef} />\r\n                </div>\r\n\r\n                <div className=\"composer chime-web-composer full-width\">\r\n                  <span className=\"label\">\r\n                    Submit question\r\n                  </span>\r\n                  <textarea\r\n                    ref={this.chatRef}\r\n                    placeholder=\"Type question here...\"\r\n                    value={message}\r\n                    maxLength={510}\r\n                    rows={3}\r\n                    onChange={this.handleChange}\r\n                    onKeyDown={this.handleKeyDown}\r\n                    className=\"chat-input\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </TabPanel>\r\n            <TabPanel>\r\n              <div className=\"messages pd-x-1\">\r\n                {this.renderParticipants()}\r\n              </div>\r\n            </TabPanel>\r\n          </Tabs>\r\n          \r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nChat.propTypes = {\r\n  chime: PropTypes.object,\r\n  title: PropTypes.string,\r\n  username: PropTypes.string,\r\n  joinInfo: PropTypes.object\r\n};\r\n\r\nexport default Chat;\r\n","export default __webpack_public_path__ + \"static/media/Mute-Mic-on.6b00996c.svg\";","export default __webpack_public_path__ + \"static/media/CameraBtn-on.e851bf90.svg\";","export default __webpack_public_path__ + \"static/media/Share-icon-on.527108e9.svg\";","export default __webpack_public_path__ + \"static/media/Raise-Hand-on.70c2d7c5.svg\";","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport muteonBtnImg from '../../assets/MuteBtn/Mute-Mic-on.svg'\r\nimport muteoffBtnImg from '../../assets/MuteBtn/Mute-Mic-off.png'\r\n// import mutehoverBtnImg from '../../assets/MuteBtn/Mute-Mic-hover.svg'\r\nimport cameraonBtnImg from '../../assets/CameraBtn/CameraBtn-on.svg'\r\nimport cameraoffBtnImg from '../../assets/CameraBtn/CameraBtn-off.png'\r\n// import camerahoverBtnImg from '../../assets/CameraBtn/CameraBtn-hover.svg'\r\nimport shareonBtnImg from '../../assets/ShareBtn/Share-icon-on.svg'\r\n// import shareoffBtnImg from '../../assets/ShareBtn/Share-icon-off.png'\r\n// import sharehoverBtnImg from '../../assets/ShareBtn/Share-icon-hover.svg'\r\nimport raiseonBtnImg from '../../assets/RaiseBtn/Raise-Hand-on.svg'\r\nimport raiseoffBtnImg from '../../assets/RaiseBtn/Raise-Hand-off.png'\r\n// import raisehoverBtnImg from '../../assets/RaiseBtn/Raise-Hand-hover.svg'\r\n\r\nimport './control.css'\r\n\r\nclass Controls extends Component {\r\n\r\n  state = {\r\n    muted: false,\r\n    focus: false,\r\n    videoStatus: 'Disabled',\r\n    handRaiseStatus: true\r\n  };\r\n\r\n  callback = (localMuted) => {\r\n    this.setState({ muted: localMuted });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.chime.audioVideo.realtimeSubscribeToMuteAndUnmuteLocalAudio(\r\n      this.callback\r\n    );\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.props && this.props.chime.audioVideo) {\r\n      this.props.chime.audioVideo.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(\r\n        this.callback\r\n      );\r\n    }\r\n  }\r\n\r\n  muteButtonOnClick = async () => {\r\n    if (this.state.muted) {\r\n      this.props.chime.audioVideo.realtimeUnmuteLocalAudio();\r\n    } else {\r\n      this.props.chime.audioVideo.realtimeMuteLocalAudio();\r\n    }\r\n    await new Promise(resolve => setTimeout(resolve, 10));\r\n  }\r\n  raiseButtonOnClick = async () => {\r\n    if (this.state.handRaiseStatus === false) {\r\n      this.setState({ handRaiseStatus: true });\r\n    }\r\n    else {\r\n      this.setState({ handRaiseStatus: false });\r\n    }\r\n  }\r\n  videoButtonOnClick = async () => {\r\n    await new Promise(resolve => setTimeout(resolve, 10));\r\n    if (this.state.videoStatus === 'Disabled') {\r\n      this.setState({ videoStatus: 'Loading' });\r\n      try {\r\n        if (!this.props.chime.currentVideoInputDevice) {\r\n          throw new Error('currentVideoInputDevice does not exist');\r\n        }\r\n\r\n        try {\r\n          await this.props.chime.chooseVideoInputDevice(\r\n            this.props.chime.currentVideoInputDevice\r\n          );\r\n        } catch (err) {\r\n          const videoInputDevices = await this.props.chime.audioVideo.listVideoInputDevices();\r\n          await this.props.chime.audioVideo.chooseVideoInputDevice(videoInputDevices[0].deviceId);\r\n        }\r\n\r\n        this.props.chime.audioVideo.startLocalVideoTile();\r\n\r\n        this.setState({ videoStatus: 'Enabled' });\r\n      } catch (error) {\r\n        // eslint-disable-next-line\r\n        console.error(error);\r\n        this.setState({ videoStatus: 'Disabled' });\r\n      }\r\n    } else if (this.state.videoStatus === 'Enabled') {\r\n      this.setState({ videoStatus: 'Loading' });\r\n      this.props.chime.meetingSession.audioVideo.stopLocalVideoTile();\r\n      this.setState({ videoStatus: 'Disabled' });\r\n    }\r\n  }\r\n\r\n  endButtonOnClick = async () => {\r\n    await this.props.chime.leaveRoom(this.props.role === 'host');\r\n    sessionStorage.removeItem(this.props.ssName);\r\n    const whereTo = `${this.props.baseHref}/${this.props.role === 'host' ? '' : 'join?room=' + this.props.title}`;\r\n    this.props.history.push(whereTo);\r\n  }\r\n\r\n  render() {\r\n    const mic_controls = this.state.muted ? 'controls__btn--mic_on' : 'controls__btn--mic_off';\r\n    const cam_controls = this.state.videoStatus === 'Enabled' ? 'controls__btn--cam_off' : 'controls__btn--cam_on';\r\n    const hand_controls = this.state.handRaiseStatus ? 'controls__btn--raise-on' : 'controls__btn--raise-off';\r\n    return (\r\n      <div className=\"controls pos-relative\">\r\n        {/* <!-- on click, toggle this control between .controls__btn--mic_on and .controls__btn--mic_off --> */}\r\n      <div className=\"button-group1\">\r\n        <button className={`controls__btn ${mic_controls} btn rounded btn--mic`} onClick={this.muteButtonOnClick}>\r\n          <img className=\"btn__svg btn__svg--mic_on\" src={muteonBtnImg} alt=\"mute on icon\"></img>\r\n          <img className=\"btn__svg btn__svg--mic_off\" src={muteoffBtnImg} alt=\"mute off icon\"></img>\r\n          <span className=\"txt-oncontrolbtn\">Unmute</span>\r\n        </button>\r\n        {/* <!-- on click, toggle this control between .controls__btn--cam_on and .controls__btn--cam_off --> */}\r\n        <button className={`controls__btn ${cam_controls} btn rounded btn--cam`} onClick={this.videoButtonOnClick}>\r\n          <img className=\"btn__svg btn__svg--cam_on\" src={cameraonBtnImg} alt=\"camera on icon\"></img>\r\n          <img className=\"btn__svg btn__svg--cam_off\" src={cameraoffBtnImg} alt=\"camera off icon\"></img>\r\n          <span className=\"txt-oncontrolbtn\">Camera on</span>\r\n        </button>\r\n        </div>\r\n        <div className=\"button-group2\">\r\n        <button className=\"controls__btn btn rounded btn--settings\" onClick={this.props.openSettings}>\r\n          <img className=\"btn__svg\" src={shareonBtnImg} alt=\"share on icon\"></img>\r\n          <span className=\"txt-oncontrolbtn\">Share screen</span>\r\n        </button>\r\n        <button className={`controls__btn ${hand_controls} btn rounded btn--hand`} onClick={this.raiseButtonOnClick}>\r\n          <img className=\"btn__svg btn__svg--hand_on\" src={raiseonBtnImg} alt=\"raise on icon\"></img>\r\n          <img className=\"btn__svg btn__svg--hand_off\" src={raiseoffBtnImg} alt=\"raise off icon\"></img>\r\n          <span className=\"txt-oncontrolbtn\">Raise screen</span>\r\n        </button>\r\n        </div>\r\n        <div className=\"button-group3\">\r\n          <button className=\"go-livebtn\">\r\n            <span className=\"txt-onbtn\">GO LIVE</span>\r\n          </button>\r\n          <button className=\"live-meetingbtn txt-onbtn\" onClick={this.endButtonOnClick}>\r\n            <span className=\"txt-onbtn\">LIVE MEETING</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nControls.propTypes = {\r\n  chime: PropTypes.object,\r\n  baseHref: PropTypes.string,\r\n  ssName: PropTypes.string,\r\n  title: PropTypes.string,\r\n  openSettings: PropTypes.func,\r\n  role: PropTypes.string,\r\n  history: PropTypes.object,\r\n  myVideoElement: PropTypes.object\r\n};\r\n\r\nexport default Controls;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAjCAYAAACD1LrRAAAABHNCSVQICAgIfAhkiAAAA8xJREFUWEe1l01IVUEUx+9cH35khJALg6cIJZqIWj3KhYQUlRkEJbmuXV9IhIS0KYooos9N6zYuyr7IdeSihZHaq17wXooJmRhUmClIqLfzH2eec8d7545kA8O7HzPzu/9zzpw5jzmWzfO8GA0tEX2tmDZNv9+pjzHG5iyX4sOYzWCCAlRPHfCgBmiK4JM261mBLaAqq5/gsEJki1RMYCiF4jHqxeIa5p2lHqcOtfJdjMB9kdQoUwu1CfiRFkzRPXxcRb2P7mfpvomuR+l6lK7L6RodJseH+dpQXes+x3NyK94/7ok0NS0GRZuEqgmhOJ9+4UsoxodIxRiLGOAfolLTtYeaWU7OU8+hAPXY0arkoy6jqRUVWAcwmByLAwqgjG713SSBkxIMpQsue0b3+GAS7QxUvmU7bMEmU2MrDSsfmQVLpUtQb7Dwj7un9GP3T1swFA5ThzmLqCOYEL3wN36HqFcIC3CwCQrltmDVZVHXk5m6wyXwaZBSOdkWzFUo5oQPobSRunQDgjA+fvZ69XTvm5sm6EoUAwJYuTB3SoAbFHDNxMV7LVPPX16iZ3mLgbTkU91MtoqjzOsQdPtUT+9lx/Nyo6DLFJMpa+ghspM0HxSiG1sQtOxax8mCvQ0FsAy5qd+oWGQiOcYq74ZFbzz1sFaBJfUDxGdqDQyfYhtxfwW1kf3Hd899+9FF73hycFyWLG5uOrj+yqkv+lorBWPPBppaN69bWPCp9O75jrytVUMESf8rGEqQJHzNAP1NA0epI8Fgq4W6zWTqNM3CKaMusCx6FaWAoiGQkM9xnPJGFujVP14Hy6jGuAlhMp4Y+ANtywRAfclEwGaDzmgdLI9B+YHy3E0QdJe6TwOgMslgLhKLLJP4IRKlGIPVSXwPZhJtLc78whN6xyM8SCk9TqPgo6BCTOCc9n28EYyX2hnsfG2/WjnzavAOvVrcMrGcD/ELp4+tOdA4Q3fYbjAvr7MCoIFqMTYwZYo6q8g2DdJ4bDvEgiwMsDY3fVjZGwaOjZ+7eWL6xesbMvdy897uPJOXqP4slHL91JFiF62x1IzQUMV6Ggzwqe4y9R5lEAo+Y4G/TLEOdVz3Xdmtzvb8nVtcE01YAYUeisLI5gObyhVR6sKXiFjpSwQXQNkAiySKAVlwVI0kF9QrT7WitIVmfWwLxYRVA68EuqrgTH3rA8ribXxRrUYiddgm+nm8QfgZU2Rpq1p53uaPG/Ocplimvvi+w7zNstgO8aetC33/JMIm8eCivxVsZNuRdRsHun+pA/X0aUm2B4ct+D/BfwHTLkSZpXBa+QAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAfCAYAAACPvW/2AAAABHNCSVQICAgIfAhkiAAAAvRJREFUWEe1lz1oFEEUgGcSTU4RVIh4RTAXCLcpQjhBNP4gEVPYRdRKFCwUqzRWaiyCIimMdnYSiVaiIQQLwcYUYhXhzkIMBm7VgCGI5hdivNv1vbmZY3ZvdvZ2d25gcmTnvXnfvHnvzQwlIc113QyItEHfBX0d+i9Kqa1SU8mC3ALIl8LsiHEaJAiTb4OxHAfxi62DkVn5I8gfCpKF73m78xTORzrtmU0dnA6oCxTbNcq28BT3DHpS2bY+zy8VL916CMa27y6vDqY/vd0IktUB9YFSSgNU9ZLGO6T0c6nFvnhzxFlZO4pzgewHK990kpKXZdXcOqD+sH0HD81wI0pZBnP59j3n98phNpdLHAC61l2YHG+Eh0oA9J4DnYBfFiOixYFBXVMx5Im3uDBhQNosA+W8SGc5I1UwpLn5uvXxxZOwENAC8a1AqAx0rEMY4FhPFqFjhnlqC0JBNmW/D42OO39Wj4iYiQKjBOKrxXTfU8+KhMy/4kLLtyt3HjlrG8cFTKo3e/fAxP1pLrMIi8DFaFtNDOlSOGgm1TbtPJYba388/EbSqdYt/zxgExePfdkDxAewOtfd6oTB+WqA+G5085CoyMiWwyqunzICTA0Q2ErDR8xOuVzYlA8g5TwfzNTjnogwVSCwh8mB9lQxyoAQALvNQUKBYsAwIOh4W0AYTxGVHBAdKCaMAMJf3YKjASWAMQ+UEMYskAEYc0CGYMwAGYRJDmQYJhlQA2AEEF7wsQ4FNZb2WKTwiYPCaYDJ+q+dioNSM6fGGDyf+HmJRwba9DfvWbZZ+GL9uPHgmXwHNgTDPCS/5/gJgdcc71kmEIuZ/tTWvv2vSak8wL7BhdwgTA0QM1E519BbeAGsyOBfhPm7t20K/jnTIBglkHAGgImX8TJVwbT2dI10PB9953NnnLiRdQIvaLIQncudnyKUnhWeoS65mi28eprUelx9OnfwwmnXJdOwXTvCHnFxjUTRYzH0tfdcn9NELSs/ORFFuRGy/wH7VTwLOywHkgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAiCAYAAABIiGl0AAAABHNCSVQICAgIfAhkiAAAA2lJREFUWEe1l7trVEEUxu+NMQ/YIqCgYsAVTBQfuIWCoEIa/4Dgo7KTWFgI2liJCCJYBFMoomnFxk1lYcqAIikCucUWalZZZYsQg0ZZJIbNXr9vnLnOzJ3Z3Rt2Dwy7e+bM+c2cOXNmNgwyShzHuzHkgBxWDcOwYruATQ76WjPXYRYuHA7A/pQ1JgJkjTr05/HBRlmG/r3Pf1bwTjg6ajnjqssyEoesvgXfyr1gOBqCE4aVQuc1a0WKsYa+CH2cECemS0Vtxcrhi7kf/Y2bo4sz9wBtOMESWtA81PF9Hi2HputpUoPzBYyhnpNNgQW0L34dhMEZ7Mf0wWjmqg+cx2g2XcqEOMABwHM+8Lcjl1a/9zVmYXM6cRbH41nATCAmi51cCjxmTTTYeLO4Url+/6lYqZQwDqZGo+INH9iVRF6A3AZjQpufqoOfL9+6G//ZOGlD+btZcqVWAPvIFWpbT2jlyu0Hm79qx1xQAeZhxycLAhNjleHEftR9WSrt7CQqQS+OWTtQBWaIWBiUrAJcAnhYTkjfOlEoJNzWD7ULVWBufK/uBd+5AmZwKpGgq6JxUgYY0D12eHsGB56MvHt+zbIVPxlq18FfR98CGs8mt0IXTsjQ1Ze+bv8ycWdS39P+/cPFfTMPJ1Q5teEEszrZpY52FRkJe3WGD1d4JfQxDJM6ngJTAbi9z8qORUPdRKmItYDS3qjV4PQycUWoJTiPTzZbUmFVBm1AxbmX/lkXGFXmEn1GCkxFUl0cE8gS3sRWllIC1WWj+qpJAUEYXAZbCa8+hsfPPvPsX9bBzjKpe2knvK2iJfv/hVpJkyRzViQte9vkCTNxf9tgZnDq+HRwpQTPA7xug1kYTnQpvHSbvEhSt5Me7g6vNFktv7jAItxdgIrLR0XTBc4BetYu+FtMJH3XjPKZAvNh9nPH4NtG7fdxNaoD0HWslo/FRAyw8RqUJh2A0lMZYF6naXAXoUZSGXvsgvbt3fUi/+rRdJbK4LE1kioBu6B8go4svpyEkfdKzDChEsLMt5wh4cfC+Lk42DaLg9Ujzpd89/LuxM+2byzPRFJJZYT6Q+H8BC7PZwqqOj3PogyL/V+pUitWiqXChbGRqDinGwDc8sZqMgvxn8rX3/Jvqryn1fOXrwfxdJHCRyGbLQyxS5/Y/QXSQwlBSl7EDwAAAABJRU5ErkJggg==\"","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport * as config from '../../config';\r\n\r\nclass Settings extends Component {\r\n\r\n  state = {\r\n    microphone: '',\r\n    speaker: '',\r\n    camera: ''\r\n  }\r\n\r\n  devicesUpdatedCallback = (fullDeviceInfo) => {\r\n    if (config.DEBUG) console.log(fullDeviceInfo);\r\n  };\r\n\r\n  componentDidMount() {\r\n    document.addEventListener(\"keydown\", this.handleKeyDown);\r\n\r\n    this.props.chime.subscribeToDevicesUpdated(this.devicesUpdatedCallback);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"keydown\", this.handleKeyDown);\r\n\r\n    this.props.chime.unsubscribeFromDevicesUpdated(this.devicesUpdatedCallback);\r\n  }\r\n\r\n  handleKeyDown = (e) => {\r\n    if (e.keyCode === 27) { // keyCode 27 is Escape key\r\n      this.props.closeSettings();\r\n    }\r\n  }\r\n\r\n  handlePlaybackURLChange = (e) => {\r\n    this.setState({ playbackURL: e.target.value });\r\n  }\r\n\r\n  handleMicrophoneChange = (e) => {\r\n    this.setState({ microphone: e.target.value });\r\n\r\n    if (this.props.chime.audioInputDevices.length) {\r\n      let selectedDevice;\r\n      let o;\r\n      for (o in this.props.chime.audioInputDevices) {\r\n        if (this.props.chime.audioInputDevices[o].value === e.target.value) {\r\n          selectedDevice = this.props.chime.audioInputDevices[o];\r\n          break;\r\n        }\r\n      }\r\n      this.props.chime.chooseAudioInputDevice(selectedDevice);\r\n    }\r\n  }\r\n\r\n  handleSpeakerChange = (e) => {\r\n    this.setState({ speaker: e.target.value });\r\n\r\n    if (this.props.chime.audioOutputDevices.length) {\r\n      let selectedDevice;\r\n      let o;\r\n      for (o in this.props.chime.audioOutputDevices) {\r\n        if (this.props.chime.audioOutputDevices[o].value === e.target.value) {\r\n          selectedDevice = this.props.chime.audioOutputDevices[o];\r\n          break;\r\n        }\r\n      }\r\n      this.props.chime.chooseAudioOutputDevice(selectedDevice);\r\n    }\r\n  }\r\n\r\n  handleCameraChange = async (e) => {\r\n    this.setState({ camera: e.target.value });\r\n\r\n    if (this.props.chime.videoInputDevices.length) {\r\n      let selectedDevice;\r\n      let o;\r\n      for (o in this.props.chime.videoInputDevices) {\r\n        if (this.props.chime.videoInputDevices[o].value === e.target.value) {\r\n          selectedDevice = this.props.chime.videoInputDevices[o];\r\n          break;\r\n        }\r\n      }\r\n      this.props.chime.chooseVideoInputDevice(selectedDevice);\r\n    }\r\n  }\r\n\r\n  handleSave = (e) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    const {microphone, speaker, camera } = this.state;\r\n    this.props.saveSettings(microphone, speaker, camera);\r\n  }\r\n\r\n  renderDevices = (devices, defaultValue, label) => {\r\n    if (devices && devices.length) {\r\n      return (\r\n        devices.map(device => {\r\n          return (\r\n            <option key={device.value} value={device.value}>{`${device.label}`}</option>\r\n          )\r\n        })\r\n      )\r\n    } else {\r\n      return (\r\n      <option value=\"no-permission\">{`Permission not granted to access ${label} devices`}</option>\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const currentMic = this.props.chime.currentAudioInputDevice;\r\n    const currentSpeaker = this.props.chime.currentAudioOutputDevice;\r\n    const currentCam = this.props.chime.currentVideoInputDevice;\r\n    const availableMics = this.props.chime.audioInputDevices;\r\n    const availableSpeakers = this.props.chime.audioOutputDevices;\r\n    const availableCams = this.props.chime.videoInputDevices;\r\n\r\n    return (\r\n      <div className=\"modal pos-absolute top-0 bottom-0 \">\r\n        <div className=\"modal__el\">\r\n          <h1 className=\"mg-b-2\">Settings</h1>\r\n          <form>\r\n            <fieldset>\r\n              <input className=\"mg-b-2\" name=\"\" id=\"\" type=\"text\" readOnly={true} placeholder=\"Playback URL\" onChange={this.handlePlaybackURLChange} value={this.props.joinInfo.PlaybackURL} disabled />\r\n              <select\r\n                name=\"microphone\"\r\n                className=\"select__field\"\r\n                onChange={this.handleMicrophoneChange}\r\n                value={this.state.microphone || currentMic.value}\r\n                disabled={!availableMics.length}\r\n              >\r\n                {this.renderDevices(availableMics, currentMic, 'microphone')}\r\n              </select>\r\n              <select\r\n                name=\"speaker\"\r\n                className=\"select__field\"\r\n                onChange={this.handleSpeakerChange}\r\n                value={this.state.speaker || currentSpeaker.value}\r\n                disabled={!availableSpeakers.length}\r\n              >\r\n                {this.renderDevices(availableSpeakers, currentSpeaker, 'speaker')}\r\n              </select>\r\n              <select\r\n                name=\"camera\"\r\n                className=\"select__field\"\r\n                onChange={this.handleCameraChange}\r\n                value={this.state.camera || currentCam.value}\r\n                disabled={!availableCams.length}\r\n              >\r\n                {this.renderDevices(availableCams, currentCam, 'camera')}\r\n              </select>\r\n              <button className=\"btn btn--primary mg-t-2\" onClick={this.handleSave}>Save</button>\r\n            </fieldset>\r\n          </form>\r\n        </div>\r\n        <div className=\"modal__overlay\"></div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nSettings.propTypes = {\r\n  chime: PropTypes.object,\r\n  joinInfo: PropTypes.object,\r\n  saveSettings: PropTypes.func,\r\n  closeSettings: PropTypes.func,\r\n  settings: PropTypes.object,\r\n  checkAudioVideoPermission: PropTypes.func,\r\n  updateAudioVideoDevices: PropTypes.func,\r\n};\r\n\r\nexport default Settings;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass LocalVideo extends Component {\r\n\r\n  state = {\r\n    enabled: false,\r\n    muted: false,\r\n    showMeta: true\r\n  }\r\n\r\n  constructor() {\r\n    super();\r\n    this.videoElement = React.createRef();\r\n  }\r\n\r\n  rosterCallback = (newRoster) => {\r\n\r\n    let attendeeId;\r\n    for (attendeeId in newRoster) {\r\n\r\n      // Exclude others\r\n      if (attendeeId !== this.props.joinInfo.Attendee.AttendeeId) {\r\n        continue;\r\n      }\r\n\r\n      this.setState({ muted: newRoster[attendeeId].muted });\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    // Hide meta info after 2 seconds\r\n    setTimeout(() => {\r\n      this.setState({\r\n        showMeta: false\r\n      });\r\n    }, 2500);\r\n\r\n    this.props.chime.audioVideo.addObserver({\r\n      videoTileDidUpdate: (tileState) => {\r\n        if (\r\n          !tileState.boundAttendeeId ||\r\n          !tileState.localTile ||\r\n          !tileState.tileId ||\r\n          !this.videoElement.current\r\n        ) {\r\n          return;\r\n        }\r\n        this.props.chime.audioVideo.bindVideoElement(\r\n          tileState.tileId,\r\n          this.videoElement.current\r\n        );\r\n        this.setState({\r\n          enabled: tileState.active\r\n        });\r\n      }\r\n    });\r\n\r\n    this.props.chime.subscribeToRosterUpdate(this.rosterCallback);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.chime.unsubscribeFromRosterUpdate(this.rosterCallback);\r\n  }\r\n\r\n  handleMouseEnter(e) {\r\n    this.setState({\r\n      showMeta: true\r\n    });\r\n  }\r\n\r\n  handleMouseLeave(e) {\r\n    this.setState({\r\n      showMeta: false\r\n    });\r\n  }\r\n\r\n  render() {\r\n    // always show metadata when muted\r\n    const showMeta = this.state.showMeta || this.state.muted || !this.state.enabled;\r\n\r\n    const micMuteCls = this.state.muted ? 'controls__btn--mic_on' : 'controls__btn--mic_off';\r\n    const metaCls = showMeta ? '' : ' cam__meta--hide';\r\n    return (\r\n      <div className=\"cam local-cam\" onMouseEnter={this.handleMouseEnter.bind(this)} onMouseLeave={this.handleMouseLeave.bind(this)}>\r\n        <div className=\"cam__preview\">\r\n          <div className=\"video-container pos-relative\">\r\n            <video className=\"attendee_cam\" ref={this.videoElement} />\r\n          </div>\r\n        </div>\r\n        <span className={`cam__meta${metaCls}`} id={`${this.props.joinInfo.Attendee.AttendeeId}`}>\r\n          You\r\n          <span className={`${micMuteCls} btn--mic`} data-id={this.props.joinInfo.Attendee.AttendeeId}>\r\n            <svg className=\"attendee mg-l-1 btn__svg btn__svg--sm btn__svg--mic_on\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M12 14C13.66 14 14.99 12.66 14.99 11L15 5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V11C9 12.66 10.34 14 12 14ZM17.3 11C17.3 14 14.76 16.1 12 16.1C9.24 16.1 6.7 14 6.7 11H5C5 14.41 7.72 17.23 11 17.72V21H13V17.72C16.28 17.24 19 14.42 19 11H17.3Z\" fill=\"white\"/></svg>\r\n            <svg className=\"attendee mg-l-1 btn__svg btn__svg--sm btn__svg--mic_off\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M19 11H17.3C17.3 11.74 17.14 12.43 16.87 13.05L18.1 14.28C18.66 13.3 19 12.19 19 11ZM14.98 11.17C14.98 11.11 15 11.06 15 11V5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V5.18L14.98 11.17ZM4.27 3L3 4.27L9.01 10.28V11C9.01 12.66 10.34 14 12 14C12.22 14 12.44 13.97 12.65 13.92L14.31 15.58C13.6 15.91 12.81 16.1 12 16.1C9.24 16.1 6.7 14 6.7 11H5C5 14.41 7.72 17.23 11 17.72V21H13V17.72C13.91 17.59 14.77 17.27 15.54 16.82L19.73 21L21 19.73L4.27 3Z\" fill=\"white\"/></svg>\r\n          </span>\r\n        </span>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nLocalVideo.propTypes = {\r\n  chime: PropTypes.object,\r\n  joinInfo: PropTypes.object\r\n};\r\n\r\nexport default LocalVideo;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass RemoteVideo extends Component {\r\n\r\n  state = {\r\n    showMeta: true\r\n  }\r\n  \r\n  componentDidMount() {\r\n    // Hide meta info after 2 seconds\r\n    if (!this.props.muted) {\r\n      setTimeout(() => {\r\n        this.setState({\r\n          showMeta: false\r\n        });\r\n      }, 2000);\r\n    }\r\n  }\r\n\r\n  handleMouseEnter(e) {\r\n    this.setState({\r\n      showMeta: true\r\n    });\r\n  }\r\n\r\n  handleMouseLeave(e) {\r\n    this.setState({\r\n      showMeta: false\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      attendeeId,\r\n      videoEnabled,\r\n      name,\r\n      muted,\r\n      videoElement\r\n    } = this.props;\r\n    // always show metadata when participant is muted or cam is off\r\n    const showMeta = this.state.showMeta || muted || !videoEnabled;\r\n\r\n    const camClass = attendeeId ? '' : ' hidden';\r\n    const micMuteCls = muted ? 'controls__btn--mic_on' : 'controls__btn--mic_off';\r\n    const metaCls =  showMeta ? '' : ' cam__meta--hide';\r\n    const videoId = `video_${attendeeId}`;\r\n    return(\r\n\r\n        <div className={`cam${camClass}`} key={attendeeId} onMouseEnter={this.handleMouseEnter.bind(this)} onMouseLeave={this.handleMouseLeave.bind(this)}>\r\n          <div className=\"cam__preview\">\r\n            <div className=\"video-container pos-relative\">\r\n              <video ref={videoElement} className=\"attendee_cam remote-attendee\" id={videoId} />\r\n            </div>\r\n          </div>\r\n          <span className={`cam__meta${metaCls}`}>\r\n            {name}\r\n            <span className={`${micMuteCls} btn--mic`} data-id={attendeeId}>\r\n              <svg className=\"attendee mg-l-1 btn__svg btn__svg--sm btn__svg--mic_on\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M12 14C13.66 14 14.99 12.66 14.99 11L15 5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V11C9 12.66 10.34 14 12 14ZM17.3 11C17.3 14 14.76 16.1 12 16.1C9.24 16.1 6.7 14 6.7 11H5C5 14.41 7.72 17.23 11 17.72V21H13V17.72C16.28 17.24 19 14.42 19 11H17.3Z\" fill=\"white\"/></svg>\r\n              <svg className=\"attendee mg-l-1 btn__svg btn__svg--sm btn__svg--mic_off\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M19 11H17.3C17.3 11.74 17.14 12.43 16.87 13.05L18.1 14.28C18.66 13.3 19 12.19 19 11ZM14.98 11.17C14.98 11.11 15 11.06 15 11V5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V5.18L14.98 11.17ZM4.27 3L3 4.27L9.01 10.28V11C9.01 12.66 10.34 14 12 14C12.22 14 12.44 13.97 12.65 13.92L14.31 15.58C13.6 15.91 12.81 16.1 12 16.1C9.24 16.1 6.7 14 6.7 11H5C5 14.41 7.72 17.23 11 17.72V21H13V17.72C13.91 17.59 14.77 17.27 15.54 16.82L19.73 21L21 19.73L4.27 3Z\" fill=\"white\"/></svg>\r\n            </span>\r\n          </span>\r\n        </div>\r\n\r\n    )\r\n  }\r\n}\r\n\r\nRemoteVideo.propTypes = {\r\n  chime: PropTypes.object,\r\n  attendeeId: PropTypes.string,\r\n  videoEnabled: PropTypes.bool,\r\n  name: PropTypes.string,\r\n  muted: PropTypes.bool,\r\n  videoElement: PropTypes.object\r\n};\r\n\r\nexport default RemoteVideo;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport RemoteVideo from './RemoteVideo';\r\nimport * as config from '../../config';\r\n\r\nconst MAX_REMOTE_VIDEOS = config.CHIME_ROOM_MAX_ATTENDEE;\r\n\r\nclass RemoteVideoGroup extends Component {\r\n\r\n  state = {\r\n    rosterChanged: false,\r\n    roster: []\r\n  }\r\n\r\n  constructor() {\r\n    super();\r\n    this.previousRoster = {};\r\n  }\r\n\r\n  findRosterSlot = (attendeeId) => {\r\n    let index;\r\n    for (index = 0; index < this.state.roster.length; index++) {\r\n      if (this.state.roster[index].attendeeId === attendeeId) {\r\n        return index;\r\n      }\r\n    }\r\n    for (index = 0; index < this.state.roster.length; index++) {\r\n      if (!this.state.roster[index].attendeeId) {\r\n        return index;\r\n      }\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  rosterCallback = (newRoster) => {\r\n\r\n    if (Object.keys(newRoster).length > 2) {\r\n      if (config.DEBUG) console.log('More than 2');\r\n    }\r\n\r\n    if (Object.keys(newRoster).length < Object.keys(this.previousRoster).length) {\r\n      if (config.DEBUG) console.log('Attendee(s) left');\r\n      const differ = Object.keys(this.previousRoster).filter(k => this.previousRoster[k] !== newRoster[k]);\r\n      if (config.DEBUG) console.log(differ);\r\n\r\n      if (differ.length) {\r\n        let i;\r\n        for (i in differ) {\r\n          const index = this.findRosterSlot(differ[i]);\r\n          const roster = this.state.roster;\r\n          roster[index] = {\r\n            videoElement: roster[index].videoElement\r\n          }\r\n          this.setState({ roster });\r\n        }\r\n      }\r\n    }\r\n\r\n    this.previousRoster = Object.assign({}, newRoster);\r\n\r\n    let attendeeId;\r\n    for (attendeeId in newRoster) {\r\n\r\n      // Exclude self\r\n      if (attendeeId === this.props.joinInfo.Attendee.AttendeeId) {\r\n        continue;\r\n      }\r\n\r\n      // exclude empty name\r\n      if (!newRoster[attendeeId].name) {\r\n        continue;\r\n      }\r\n\r\n      const index = this.findRosterSlot(attendeeId);\r\n      const roster = this.state.roster;\r\n      const attendee = {\r\n        ...roster[index],\r\n        attendeeId,\r\n        ...newRoster[attendeeId]\r\n      };\r\n\r\n      roster[index] = attendee;\r\n      this.setState({ roster });\r\n    }\r\n  };\r\n\r\n  videoTileDidUpdateCallback = (tileState) => {\r\n    if (\r\n      !tileState.boundAttendeeId ||\r\n      tileState.localTile ||\r\n      tileState.isContent ||\r\n      !tileState.tileId\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    let index = this.findRosterSlot(tileState.boundAttendeeId);\r\n    const roster = this.state.roster;\r\n    const attendee = {\r\n      ...roster[index],\r\n      videoEnabled: tileState.active,\r\n      attendeeId: tileState.boundAttendeeId,\r\n      tileId: tileState.tileId\r\n    };\r\n    roster[index] = attendee;\r\n    this.setState({ roster });\r\n\r\n    setTimeout(() => {\r\n      if (config.DEBUG) console.log(roster[index]);\r\n      const videoElement = document.getElementById(`video_${tileState.boundAttendeeId}`);\r\n      if (videoElement) {\r\n        this.props.chime.audioVideo.bindVideoElement(\r\n          tileState.tileId,\r\n          videoElement\r\n        );\r\n      }\r\n    }, 1000);\r\n  };\r\n\r\n  videoTileWasRemovedCallback = (tileId) => {\r\n    let roster = this.state.roster;\r\n\r\n    // Find the removed tileId in the roster and mark the video as disabled.\r\n    // eslint-disable-next-line\r\n    roster.find((o, i) => {\r\n      if (o.tileId === tileId) {\r\n        roster[i].videoEnabled = false;\r\n        this.setState({ roster });\r\n        if (config.DEBUG) console.log(`Tile was removed ${tileId}`);\r\n      }\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    const roster = [];\r\n    // eslint-disable-next-line\r\n    Array.from(Array(MAX_REMOTE_VIDEOS).keys()).map((key, index) => {\r\n      roster[index] = {\r\n        videoElement: React.createRef()\r\n      };\r\n    });\r\n    this.setState({ roster });\r\n\r\n    this.props.chime.subscribeToRosterUpdate(this.rosterCallback);\r\n\r\n    this.props.chime.audioVideo.addObserver({\r\n      videoTileDidUpdate: this.videoTileDidUpdateCallback,\r\n      videoTileWasRemoved: this.videoTileWasRemovedCallback,\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.chime.unsubscribeFromRosterUpdate(this.rosterCallback);\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <React.Fragment>\r\n        {this.state.roster.map((attendee, index) => {\r\n          return (\r\n            <RemoteVideo\r\n              chime={this.props.chime}\r\n              key={index}\r\n              attendeeId={attendee.attendeeId}\r\n              videoEnabled={attendee.videoEnabled}\r\n              name={attendee.name}\r\n              muted={attendee.muted}\r\n              videoElement={attendee.videoElement}\r\n            />\r\n          );\r\n        })}\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nRemoteVideoGroup.propTypes = {\r\n  chime: PropTypes.object,\r\n  joinInfo: PropTypes.object\r\n};\r\n\r\nexport default RemoteVideoGroup;\r\n","export default __webpack_public_path__ + \"static/media/Logo.c65422c9.svg\";","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as config from \"../../config\";\r\n\r\nimport { MeetingSessionStatusCode } from \"amazon-chime-sdk-js\";\r\n\r\n// Components\r\n// import VideoPlayer from \"../videoPlayer/VideoPlayer\";\r\nimport Chat from \"../chat/Chat\";\r\nimport Controls from \"./Controls\";\r\nimport Settings from \"./Settings\";\r\nimport Error from \"./Error\";\r\nimport LocalVideo from './LocalVideo';\r\nimport RemoteVideoGroup from './RemoteVideoGroup';\r\n\r\n// Styles\r\nimport \"./ChimeWeb.css\";\r\nimport \"./Meeting.css\";\r\nimport logo from \"./../../assets/Logo.svg\";\r\nimport bodylogo from \"../../assets/UoL.png\";\r\n\r\nclass Meeting extends Component {\r\n    state = {\r\n        meetingStatus: null, // Loading, Success or Failed\r\n        showSettings: false,\r\n\r\n        showError: false,\r\n        errorMsg: \"\",\r\n        showPopupMessage: false,\r\n    };\r\n\r\n    showModal = () => {\r\n        console.log(\"show modal\");\r\n        this.setState({ showPopupMessage: true });\r\n    };\r\n\r\n    hideModal = () => {\r\n        console.log(\"hide modal\");\r\n        this.setState({ showPopupMessage: false });\r\n    };\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this.baseHref = config.BASE_HREF;\r\n        this.ssName = \"\";\r\n\r\n        this.audioElementRef = React.createRef();\r\n        this.myVideoElement = React.createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n        const start = async () => {\r\n            try {\r\n                const qs = new URLSearchParams(this.props.location.search);\r\n                const room = qs.get(\"room\");\r\n                this.ssName = `chime[${room}]`;\r\n                if (!room || !sessionStorage.getItem(this.ssName)) {\r\n                    this.props.history.push(`${this.baseHref}/`);\r\n                }\r\n\r\n                const ssData = JSON.parse(sessionStorage.getItem(this.ssName));\r\n                if (config.DEBUG) console.log(ssData);\r\n\r\n                this.username = ssData.username;\r\n                this.title = ssData.title;\r\n                this.role = ssData.role;\r\n\r\n                if (!ssData.joinInfo) {\r\n                    this.joinInfo = await this.props.chime.createRoom(\r\n                        this.role,\r\n                        this.username,\r\n                        this.title,\r\n                        ssData.playbackURL\r\n                    );\r\n                    const data = {\r\n                        ...ssData,\r\n                        joinInfo: this.joinInfo,\r\n                    };\r\n                    sessionStorage.setItem(this.ssName, JSON.stringify(data));\r\n                    this.playbackURL = this.joinInfo.PlaybackURL;\r\n                } else {\r\n                    // Browser refresh\r\n                    this.joinInfo = ssData.joinInfo;\r\n                    this.playbackURL = ssData.joinInfo.PlaybackURL;\r\n                    await this.props.chime.reInitializeMeetingSession(\r\n                        this.joinInfo,\r\n                        this.username\r\n                    );\r\n                }\r\n\r\n                this.setState({ meetingStatus: \"Success\" });\r\n\r\n                this.props.chime.audioVideo.addObserver({\r\n                    audioVideoDidStop: async (sessionStatus) => {\r\n                        if (\r\n                            sessionStatus.statusCode() ===\r\n                            MeetingSessionStatusCode.AudioCallEnded\r\n                        ) {\r\n                            const whereTo = `${this.baseHref}/${\r\n                                this.role === \"host\" ? \"\" : \"end\"\r\n                            }`;\r\n                            this.props.chime.leaveRoom(this.role === \"host\");\r\n                            this.props.history.push(whereTo);\r\n                        }\r\n                    },\r\n                });\r\n\r\n                this.props.chime.joinRoom(this.audioElementRef.current);\r\n                await this.props.chime.joinRoom(this.audioElementRef.current);\r\n            } catch (error) {\r\n                // eslint-disable-next-line\r\n                console.error(error);\r\n                this.setState({ meetingStatus: \"Failed\" });\r\n            }\r\n        };\r\n        start();\r\n    }\r\n\r\n    /*\r\n     * Settings\r\n     */\r\n\r\n    openSettings = () => {\r\n        this.setState({ showSettings: true });\r\n    };\r\n\r\n    closeSettings = () => {\r\n        this.setState({ showSettings: false });\r\n    };\r\n\r\n    handleClick = (e) => {\r\n        const { showSettings } = this.state;\r\n        if (showSettings) {\r\n            let node = e.target;\r\n            let isModal = false;\r\n            while (node) {\r\n                if (\r\n                    node &&\r\n                    node.classList &&\r\n                    node.classList.contains(\"modal__el\")\r\n                ) {\r\n                    isModal = true;\r\n                    break;\r\n                }\r\n                node = node.parentNode;\r\n            }\r\n            if (!isModal) {\r\n                this.setState({ showSettings: false });\r\n            }\r\n        }\r\n    };\r\n\r\n    saveSettings = (\r\n        playbackURL,\r\n        currentAudioInputDevice,\r\n        currentAudioOutputDevice,\r\n        currentVideoInputDevice\r\n    ) => {\r\n        this.setState({\r\n            showSettings: false,\r\n            currentAudioInputDevice,\r\n            currentAudioOutputDevice,\r\n            currentVideoInputDevice,\r\n        });\r\n    };\r\n\r\n    setMetadataId = (metadataId) => {\r\n        this.setState({ metadataId });\r\n    };\r\n\r\n    setErrorMsg = (errorMsg) => {\r\n        this.setState({ errorMsg, showError: true });\r\n    };\r\n\r\n    closeError = () => {\r\n        this.setState({ showError: false });\r\n    };\r\n\r\n    layout = () => {\r\n        if (this.state.meetingStatus !== \"Success\") {\r\n            return;\r\n        }\r\n\r\n        return (\r\n            <div className=\"meeting-grid\" onClick={this.handleClick}>\r\n                <div className=\"meeting-header\">\r\n                    <img className=\"header-logo\" src={logo} alt=\"Logo\" />\r\n                    <div className=\"header-text\">\r\n                        Josh Krohn, The University of Law\r\n                    </div>\r\n                </div>\r\n                <div className=\"main-body\">\r\n                    <div className=\"main-stage body-left\">\r\n                        <div className=\"body-before\">\r\n                            <div className=\"body-wrapper\">\r\n                                {/* <VideoPlayer\r\n                                    setMetadataId={this.setMetadataId}\r\n                                    videoStream={this.playbackURL}\r\n                                /> */}\r\n                                <LocalVideo\r\n                                    chime={this.props.chime}\r\n                                    joinInfo={this.joinInfo}\r\n                                />\r\n                                <div className=\"body-logo\">\r\n                                    <span> SPONSORED BY: </span>\r\n                                    <img src={bodylogo} alt=\"body logo\"/>\r\n                                </div>\r\n                                <div className=\"remote-cams\">\r\n                                    <RemoteVideoGroup\r\n                                        chime={this.props.chime}\r\n                                        joinInfo={this.joinInfo}\r\n                                    />\r\n                                </div>\r\n                                \r\n                            </div>\r\n                        </div>\r\n                        <div className=\"meeting-footer\">\r\n                            <Controls\r\n                                chime={this.props.chime}\r\n                                baseHref={this.baseHref}\r\n                                ssName={this.ssName}\r\n                                title={this.title}\r\n                                openSettings={this.openSettings}\r\n                                role={this.role}\r\n                                history={this.props.history}\r\n                                myVideoElement={this.myVideoElement}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"right-sidebar\">\r\n                        {!this.state.showPopupMessage ? (\r\n                            \" \"\r\n                        ) : (\r\n                            <button className={\"btnPopdownMessage btnPopupMessageFont\"} onClick={this.hideModal}>&gt;</button>\r\n                        )}\r\n                        {this.state.showPopupMessage ? (\r\n                            \" \"\r\n                        ) : (\r\n                            <button\r\n                                className={\r\n                                    \"btnPopupMessage btnPopupMessageFont\"\r\n                                }\r\n                                onClick={this.showModal}\r\n                            >\r\n                                <span>\r\n                                    V Q&A/PARTICIPANTS\r\n                                </span>\r\n                            </button>\r\n                        )}\r\n                        {!this.state.showPopupMessage ? (\r\n                            \" \"\r\n                        ) : (\r\n                            <Chat\r\n                                chime={this.props.chime}\r\n                                title={this.title}\r\n                                username={this.username}\r\n                                joinInfo={this.joinInfo}\r\n                            />\r\n                        )}\r\n                        {this.state.showSettings && (\r\n                            <Settings\r\n                                chime={this.props.chime}\r\n                                joinInfo={this.joinInfo}\r\n                                saveSettings={this.saveSettings}\r\n                            />\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <audio ref={this.audioElementRef} style={{ display: \"none\" }} />\r\n\r\n                {this.layout()}\r\n\r\n                {this.state.showError && (\r\n                    <Error\r\n                        closeError={this.closeError}\r\n                        errorMsg={this.state.errorMsg}\r\n                    />\r\n                )}\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nMeeting.propTypes = {\r\n    chime: PropTypes.object,\r\n};\r\n\r\nexport default withRouter(Meeting);\r\n","export default \"data:image/png;base64,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\"","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport * as config from '../../config';\r\n\r\nclass End extends Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.baseHref = config.BASE_HREF;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"welcome form-grid\">\r\n        <div className=\"welcome__intro\">\r\n          <div className=\"intro__inner formatted-text\">\r\n            <h1>Amazon IVS with ChimeSDK</h1>\r\n            <h3>Create or join rooms, and watch Amazon IVS streams with anyone.</h3>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"welcome__content pd-4\">\r\n          <div className=\"content__inner formatted-text\">\r\n            <h2 className=\"mg-b-2\">Room closed</h2>\r\n            <p>The host has ended the meeting and closed the room.</p>\r\n            <a href={`${this.baseHref}/`} className=\"mg-t-3 btn btn--primary\">Create a new room</a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(End);\r\n","import React from 'react';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route\r\n} from \"react-router-dom\";\r\nimport * as config from '../config';\r\n// import './App.css';\r\n\r\nimport ChimeSdkWrapper from './chime/ChimeSdkWrapper';\r\n\r\nimport Home from './chimeWeb/Welcome';\r\nimport Join from './chimeWeb/Join';\r\nimport Meeting from './chimeWeb/Meeting';\r\nimport End from './chimeWeb/End';\r\n\r\nfunction App() {\r\n  const chime = new ChimeSdkWrapper();\r\n  const baseHref = config.BASE_HREF;\r\n\r\n  return (\r\n    <div className=\"App full-width full-height\">\r\n      <Router>\r\n        <Switch>\r\n          <Route path={`${baseHref}/end`}>\r\n            <End />\r\n          </Route>\r\n          <Route path={`${baseHref}/meeting`}>\r\n            <Meeting\r\n              chime={chime}\r\n            />\r\n          </Route>\r\n          <Route path={`${baseHref}/join`}>\r\n            <Join\r\n              chime={chime}\r\n            />\r\n          </Route>\r\n          <Route path={`${baseHref}`}>\r\n            <Home\r\n              chime={chime}\r\n            />\r\n          </Route>\r\n        </Switch>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}